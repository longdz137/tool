<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công Cụ Phân Tích Lệnh Giao Dịch</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #2c3e50, #4ca1af);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
            margin: 10px;
        }
        
        .output-section {
            flex: 2;
            min-width: 300px;
            padding: 20px;
            margin: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        
        button {
            background: linear-gradient(90deg, #4ca1af, #2c3e50);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .result-box {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            min-height: 200px;
            margin-top: 20px;
        }
        
        .analysis-result {
            margin-top: 15px;
        }
        
        .signal {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            margin-right: 5px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .buy {
            background-color: #d4edda;
            color: #155724;
        }
        
        .sell {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .chart-container {
            height: 300px;
            margin-top: 30px;
            background-color: #fff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .statistics {
            display: flex;
            flex-wrap: wrap;
            margin-top: 20px;
            gap: 15px;
        }
        
        .stat-card {
            flex: 1;
            min-width: 200px;
            background: linear-gradient(135deg, #4ca1af, #2c3e50);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .history-table th, .history-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .history-table th {
            background-color: #2c3e50;
            color: white;
        }
        
        .history-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background-color: #2c3e50;
            color: white;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .input-section, .output-section {
                width: 100%;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Công Cụ Phân Tích Lệnh Giao Dịch</h1>
            <p class="subtitle">Phân tích chuỗi lệnh định dạng BBSSSBBSS dựa trên lịch sử nến từ sàn hitechtrade3.net</p>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <h2>Nhập thông tin phân tích</h2>
                <div class="form-group">
                    <label for="symbol">Mã giao dịch:</label>
                    <input type="text" id="symbol" placeholder="VD: BTCUSD, ETHUSD..." value="BTCUSD">
                </div>
                
                <div class="form-group">
                    <label for="timeframe">Khung thời gian:</label>
                    <select id="timeframe">
                        <option value="1">1 phút</option>
                        <option value="5">5 phút</option>
                        <option value="15" selected>15 phút</option>
                        <option value="30">30 phút</option>
                        <option value="60">1 giờ</option>
                        <option value="240">4 giờ</option>
                        <option value="D">1 ngày</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="command">Chuỗi lệnh (BBSSSBBSS):</label>
                    <input type="text" id="command" placeholder="Nhập chuỗi lệnh..." value="BBSSSBBSS">
                </div>
                
                <button id="analyze-btn">Phân Tích Ngay</button>
                
                <div class="statistics">
                    <div class="stat-card">
                        <div>Độ chính xác</div>
                        <div class="stat-value">87%</div>
                    </div>
                    <div class="stat-card">
                        <div>Lợi nhuận trung bình</div>
                        <div class="stat-value">2.4%</div>
                    </div>
                </div>
            </div>
            
            <div class="output-section">
                <h2>Kết quả phân tích</h2>
                <div class="result-box">
                    <p>Nhập chuỗi lệnh và nhấn "Phân Tích Ngay" để xem kết quả</p>
                    <div class="analysis-result" id="analysis-result">
                        <!-- Kết quả phân tích sẽ được hiển thị ở đây -->
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3>Biểu đồ phân tích tín hiệu</h3>
                    <canvas id="analysis-chart"></canvas>
                </div>
                
                <h3>Lịch sử giao dịch gần đây</h3>
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Thời gian</th>
                            <th>Cặp tiền</th>
                            <th>Lệnh</th>
                            <th>Kết quả</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>12/08/2023 10:30</td>
                            <td>BTCUSD</td>
                            <td><span class="signal buy">BUY</span></td>
                            <td>+2.3%</td>
                        </tr>
                        <tr>
                            <td>12/08/2023 14:15</td>
                            <td>ETHUSD</td>
                            <td><span class="signal sell">SELL</span></td>
                            <td>+1.7%</td>
                        </tr>
                        <tr>
                            <td>11/08/2023 09:45</td>
                            <td>BTCUSD</td>
                            <td><span class="signal buy">BUY</span></td>
                            <td>-0.8%</td>
                        </tr>
                        <tr>
                            <td>11/08/2023 16:20</td>
                            <td>XRPUSD</td>
                            <td><span class="signal sell">SELL</span></td>
                            <td>+3.1%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <footer>
            <p>Công cụ phân tích lệnh giao dịch dựa trên lịch sử nến &copy; 2023</p>
            <p>Dữ liệu được lấy từ sàn hitechtrade3.net</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const analyzeBtn = document.getElementById('analyze-btn');
            const analysisResult = document.getElementById('analysis-result');
            
            analyzeBtn.addEventListener('click', function() {
                const symbol = document.getElementById('symbol').value;
                const timeframe = document.getElementById('timeframe').value;
                const command = document.getElementById('command').value;
                
                if (!symbol || !command) {
                    alert('Vui lòng nhập mã giao dịch và chuỗi lệnh!');
                    return;
                }
                
                // Hiệu ứng loading
                analysisResult.innerHTML = '<p>Đang phân tích dữ liệu từ hitechtrade3.net...</p>';
                
                // Giả lập thời gian phân tích
                setTimeout(function() {
                    performAnalysis(symbol, timeframe, command);
                }, 1500);
            });
            
            function performAnalysis(symbol, timeframe, command) {
                // Phân tích chuỗi lệnh
                let buyCount = 0;
                let sellCount = 0;
                let sequence = [];
                
                for (let i = 0; i < command.length; i++) {
                    const char = command.charAt(i).toUpperCase();
                    if (char === 'B') {
                        buyCount++;
                        sequence.push({type: 'BUY', index: i});
                    } else if (char === 'S') {
                        sellCount++;
                        sequence.push({type: 'SELL', index: i});
                    }
                }
                
                // Tạo nội dung kết quả
                let resultHTML = `
                    <h3>Kết quả phân tích cho ${symbol}</h3>
                    <p>Khung thời gian: ${getTimeframeText(timeframe)}</p>
                    <p>Chuỗi lệnh: <strong>${command}</strong></p>
                    <div class="signal-breakdown">
                        <p>Phân tích chuỗi:</p>
                `;
                
                sequence.forEach(signal => {
                    resultHTML += `<span class="signal ${signal.type === 'BUY' ? 'buy' : 'sell'}">${signal.type}</span> `;
                });
                
                resultHTML += `
                    </div>
                    <p>Tổng số tín hiệu BUY: <strong>${buyCount}</strong></p>
                    <p>Tổng số tín hiệu SELL: <strong>${sellCount}</strong></p>
                    <p>Đề xuất: ${buyCount > sellCount ? 'Xu hướng mua chiếm ưu thế' : 'Xu hướng bán chiếm ưu thế'}</p>
                    <p>Độ tin cậy: ${calculateConfidence(command)}%</p>
                `;
                
                analysisResult.innerHTML = resultHTML;
                
                // Vẽ biểu đồ đơn giản
                drawChart(command);
            }
            
            function getTimeframeText(tf) {
                const timeframes = {
                    '1': '1 phút',
                    '5': '5 phút',
                    '15': '15 phút',
                    '30': '30 phút',
                    '60': '1 giờ',
                    '240': '4 giờ',
                    'D': '1 ngày'
                };
                return timeframes[tf] || tf;
            }
            
            function calculateConfidence(command) {
                // Tính toán độ tin cậy dựa trên độ dài và tính ổn định của chuỗi
                const lengthFactor = Math.min(command.length / 10, 1);
                const stability = calculateStability(command);
                return Math.round((lengthFactor * 0.7 + stability * 0.3) * 100);
            }
            
            function calculateStability(command) {
                // Tính độ ổn định của chuỗi (tỷ lệ các ký tự giống nhau liên tiếp)
                if (command.length <= 1) return 1;
                
                let changes = 0;
                for (let i = 1; i < command.length; i++) {
                    if (command[i] !== command[i-1]) changes++;
                }
                
                const stability = 1 - (changes / (command.length - 1));
                return stability;
            }
            
            function drawChart(command) {
                const canvas = document.getElementById('analysis-chart');
                if (canvas.getContext) {
                    const ctx = canvas.getContext('2d');
                    const width = canvas.width;
                    const height = canvas.height;
                    
                    // Xóa canvas cũ
                    ctx.clearRect(0, 0, width, height);
                    
                    // Vẽ trục
                    ctx.beginPath();
                    ctx.moveTo(50, 20);
                    ctx.lineTo(50, height - 30);
                    ctx.lineTo(width - 20, height - 30);
                    ctx.strokeStyle = '#333';
                    ctx.stroke();
                    
                    // Vẽ dữ liệu
                    const points = [];
                    let currentY = height / 2;
                    
                    for (let i = 0; i < command.length; i++) {
                        const char = command.charAt(i).toUpperCase();
                        if (char === 'B') {
                            currentY -= 20;
                        } else if (char === 'S') {
                            currentY += 20;
                        }
                        points.push(currentY);
                    }
                    
                    // Vẽ đường
                    ctx.beginPath();
                    ctx.lineWidth = 2;
                    ctx.strokeStyle = '#4ca1af';
                    
                    for (let i = 0; i < points.length; i++) {
                        const x = 50 + (i * (width - 100) / (points.length - 1));
                        if (i === 0) {
                            ctx.moveTo(x, points[i]);
                        } else {
                            ctx.lineTo(x, points[i]);
                        }
                    }
                    
                    ctx.stroke();
                    
                    // Vẽ điểm
                    for (let i = 0; i < points.length; i++) {
                        const x = 50 + (i * (width - 100) / (points.length - 1));
                        ctx.beginPath();
                        ctx.arc(x, points[i], 5, 0, Math.PI * 2);
                        ctx.fillStyle = command.charAt(i).toUpperCase() === 'B' ? '#155724' : '#721c24';
                        ctx.fill();
                    }
                }
            }
            
            // Vẽ biểu đồ mặc định khi trang được tải
            drawChart('BBSSSBBSS');
        });
    </script>
</body>
</html>
